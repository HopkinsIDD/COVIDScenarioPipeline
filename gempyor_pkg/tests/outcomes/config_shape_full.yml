name: test_inference
start_date: 2020-04-01
end_date: 2020-05-15
nsimulations: 1
dt: 0.25

spatial_setup:
  base_path: data
  setup_name: test1
  geodata: geodata.csv
  mobility: mobility.csv
  popnodes: population
  nodenames: geoid
  census_year: 2018
  modeled_states:
    - HI


interventions:
  scenarios:
    - None
  settings:
    Hprobability:
      template: Reduce
      parameter: "this_npi_affects_the_mean"
      affected_geoids: "all"
      period_start_date: 2020-04-01
      period_end_date: 2020-05-15
      value:
        distribution: fixed
        value: 0.5
    H_delay_mean:
      template: Reduce
      parameter: "this_npi_affects_the_mean"
      affected_geoids: "all"
      period_start_date: 2020-04-15
      period_end_date: 2020-05-05
      value:
        distribution: fixed
        value: 0.5
    H_delay_sd:
      template: Reduce
      parameter: "this_npi_affects_the_sd"
      affected_geoids: "all"
      period_start_date: 2020-04-25
      period_end_date: 2020-04-30
      value:
        distribution: fixed
        value: 0.5
    all_outcomes_npis:
      template: Stacked
      scenarios: ["Hprobability", "H_delay_sd", "H_delay_mean"]

outcomes_shapes:
  delay_hosp:
    distribution: truncnorm
    mean: 5
    sd: 4
    a: 0
    b: 10
    intervention_param_name:
      mean: this_npi_affects_the_mean
      sd: this_npi_affects_the_sd
  duration_hosp:
    array: [0, .05, .1, .2, .2, .2, .1, .05]
  duration_icu:
    distribution: truncnorm
    mean: 10
    sd: 10
    a: 0
    b: 20
    cutoff: 15
    shift: 3
  duration_icu_mod:
    array: [.5, .25, .25]
    shift: 3
  test_automatic_support:  # not used elsewhere in the config, but for test_outcomes_shape_single():
    distribution: poisson
    lam: 30
  gamma_rate:
    distribution: gamma
    shape: 3
    rate: 1/10
  gamma_scale:
    distribution: gamma
    shape: 3
    scale: 10
outcomes:
  method: delayframe
  param_from_file: False
  scenarios:
    - high_death_rate
  settings:
    high_death_rate:
      incidH:
        source: incidI
        probability:
          intervention_param_name: hoSp_param_prob
          value:
            distribution: fixed
            value: .2
        delay:
          shape: delay_hosp
        duration:
          shape: duration_hosp ## shape instead of value: \n distribution: fixed, ...
          name: duration_with_a_twist
      incidICU:
        source: incidI
        probability:
          value:
            distribution: fixed
            value: .1
        delay:
          value:
            distribution: fixed
            value: 3
        duration:
          shape: duration_icu_mod
  interventions:
    settings:
      high_death_rate:
        template: Stacked
        scenarios: ["all_outcomes_npis"]